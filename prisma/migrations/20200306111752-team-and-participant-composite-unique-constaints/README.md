# Migration `20200306111752-team-and-participant-composite-unique-constaints`

This migration has been generated by Mitchell Romney at 3/6/2020, 11:17:52 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE UNIQUE INDEX "Participant.summoner_match" ON "public"."Participant"("summoner","match")

CREATE UNIQUE INDEX "Team.teamId_match" ON "public"."Team"("teamId","match")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200306105821-item-relations-fix..20200306111752-team-and-participant-composite-unique-constaints
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = "postgresql://mitchellromney:mitchellromney@localhost:5432/ally-backend"
 }
 model Champion {
   blurb                     String        @default("")
@@ -306,8 +306,10 @@
   champion                        Champion
   match                           Match
   summoner                        Summoner
   team                            Team
+
+  @@unique([summoner, match])
 }
 model ParticipantFrame {
   current_gold          Int   @default(0)
@@ -397,8 +399,10 @@
   towerKills           Int           @default(0)
   vilemawKills         Int           @default(0)
   win                  Boolean       @default(false)
   match                Match?
+
+  @@unique([teamId, match])
 }
 model User {
   email    String     @default("") @unique
```


